<link rel="stylesheet" href="{{ 'related-blogs.css' | asset_url }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css" />

<div class="related-blogs">
  <h2 class="related-blogs-title">Related Blogs</h2>
  <div class="blog-carousel">
    {% assign product_tags = product.tags %}
    {% for article in blogs['health-journal'].articles %}
      {% assign article_tags = article.tags %}
      {% for tag in product_tags %}
        {% if article_tags contains tag %}
          <div class="blog-item">
            <a href="{{ article.url }}">
              <img src="{{ article.image | img_url: 'medium' }}" alt="{{ article.title }}" class="blog-item-image">
              <h3 class="blog-item-title">{{ article.title }}</h3>
            </a>
          </div>
          {% break %}
        {% endif %}
      {% endfor %}
    {% endfor %}
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
<script>
  $(document).ready(function(){
    $('.blog-carousel').slick({
      slidesToShow: 3,
      slidesToScroll: 1,
      arrows: true,
      infinite: true,
      responsive: [
        {
          breakpoint: 1024,
          settings: {
            slidesToShow: 2,
          }
        },
        {
          breakpoint: 768,
          settings: {
            slidesToShow: 1,
          }
        }
      ]
    });
  });
</script>
